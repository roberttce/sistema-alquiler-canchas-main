<app-sidebar></app-sidebar>
  <div class="content p-4">
      <div class="container-fluid">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<div class="container" style="margin-top: 7px;">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <b class="fs-4">Listar Administradores</b>
      <div>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalAdministrador">
          Registrar Administrador
        </button>
      </div>
    </div>
    <div class="card-body" style="min-height: 400px;">
    
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Id</th>
            <th>Nombre</th>
            <th>Apellido</th>
            <th class="text-center">Usuario</th>
            <th class="text-center">Correo Electrónico</th>
            <th class="text-center">Eliminar</th>
            <th class="text-center">Editar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let admin of administradores">
            <td>{{admin.idAdministrador}}</td>
            <td>{{admin.nombre}}</td>
            <td>{{admin.apellido}}</td>
            <td class="text-center">{{admin.usuario}}</td>
            <td class="text-center">{{admin.correoElectronico}}</td>
            <td class="text-center">
              <button class="btn btn-danger" (click)="eliminarAdministrador(admin.idAdministrador)">
                <i class="fas fa-trash-alt"></i>  </button>
            </td>
            <td class="text-center">
              <button class="btn btn-sm btn-warning" (click)="editarAdministrador(admin, editModal)">
                <i class="fas fa-edit"></i> </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

  <ng-template #editModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Editar Administrador</h4>
        
        <button type="button" class="btn-close" (click)="modalRef?.hide()" aria-label="Cerrar"></button>
    </div>
    <div class="modal-body">
        <form [formGroup]="editForm">
          <div class="row">
            <div class="col-md-6">
                <label for="idCliente" class="form-label">Id Administrador</label>
                <input type="text" formControlName="idAdministrador" class="form-control" id="idAdministrador" readonly>
            </div>
            <div class="col-md-6">
                <label for="nombre" class="form-label">Nombre</label>
                <input type="text" formControlName="nombre" class="form-control" id="nombre">
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
                <label for="apellido" class="form-label">Apellido</label>
                <input type="text" formControlName="apellido" class="form-control" id="apellido">
            </div>
            <div class="col-md-6">
              <label for="apellido" class="form-label">Usuario</label>
              <input type="text" formControlName="usuario" class="form-control" id="usuario">
          </div>
          </div>
            <div class="col-md-6">
                <label for="correoElectronico" class="form-label">Correo Electrónico</label>
                <input type="email" formControlName="correoElectronico" class="form-control" id="correoElectronico">
            </div>
            
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modalRef?.hide()">Cancelar</button>
        
        <button type="button" class="btn btn-primary" (click)="actualizarAdministrador(editForm.value, modal)">Actualizar</button>
    </div>
  </ng-template>


  <!-- Modal para registrar cliente -->
  <div class="modal fade" id="modalAdministrador" tabindex="-1" aria-labelledby="modalAdministradorLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalClienteLabel">Registrar Administrador</h5>
          <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>

        </div>
        <div class="modal-body">
          <form [formGroup]="frmAdministrador" (ngSubmit)="guardarAdministrador()">
            <div class="row">
              <div class="col-md-6 mb-3">
            
                <label for="nombre">Nombre</label>
                <input type="text" id="nombre" class="form-control form-control-sm" formControlName="nombre" required>
                <div *ngIf="nombreFb.invalid && nombreFb.touched" class="text-danger">
                  Nombre es requerido
                </div>
            </div>
            <div class="col-md-6 mb-3">
              <label for="apellido">Apellido</label>
            <input type="text" id="apellido" class="form-control form-control-sm" formControlName="apellido" required>
            <div *ngIf="apellidoFb.invalid && apellidoFb.touched" class="text-danger">
              Apellido es requerido
            </div>
            </div>
            </div>
            <div class="row">
            <div class="col-md-6 mb-3">
              <label for="usuario">Usuario</label>
            <input type="text" id="usuario" class="form-control form-control-sm" formControlName="usuario" required>
            <div *ngIf="usuarioFb.invalid && usuarioFb.touched" class="text-danger">
              Usuario es requerido
            </div>
            </div>
            <div class="col-md-6 mb-3">
              <label for="correoElectronico">Correo Electrónico</label>
            <input type="email" id="correoElectronico" class="form-control form-control-sm" formControlName="correoElectronico" required>
            <div *ngIf="correoElectronicoFb.invalid && correoElectronicoFb.touched" class="text-danger">
              Correo electrónico inválido o requerido
            </div>
            </div>
            </div>
            <div class="row">
            <div class="col-md-6 mb-3">
              <label for="contrasena">Contraseña</label>
              <input type="password" id="contrasena" class="form-control form-control-sm" formControlName="contrasena" required>
              <div *ngIf="contrasenaFb.invalid && contrasenaFb.touched" class="text-danger">
                Contraseña es requerida y debe tener al menos 6 caracteres
              </div>
            </div>
            
         
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="submit" class="btn btn-primary" [disabled]="frmAdministrador.invalid">Registrar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>



      </div>
  </div>